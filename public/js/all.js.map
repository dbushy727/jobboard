{"version":3,"sources":["payment.js","edit-job.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"all.js","sourcesContent":["var key = $('#key').val(),\n    handler = StripeCheckout.configure({\n        key: key,\n        image: 'https://cdn2.iconfinder.com/data/icons/hicons/600/relatorio.png',\n        locale: 'auto',\n        token: function(token) {\n            $('#token').val(token.id);\n            $('#email').val(token.email);\n            $('#payment').submit();\n        }\n});\n\nfunction setupCheckout() {\n    var slug = window.location.pathname.split('/')[2];\n\n    var callback = function (job) {\n        if (job.status == 'error') {\n            $('#errorMessage').text(job.message);\n            return false;\n        }\n    }\n\n    return getJob(slug, callback);\n}\n\nfunction getJob(slug, callback)\n{\n    return $.ajax({\n        url: '/jobs-ajax/' + slug,\n        method: 'get',\n        success: function (job) {\n            return callback(job);\n        }\n    });\n}\n\nfunction createCheckoutListener() {\n    $('#paymentButton').on('click', function(e) {\n        e.preventDefault();\n        $('#checkoutModal').hide();\n\n        setupCheckout().then(function (data) {\n            var amount = data.message.price - data.message.discount;\n\n            // Open Checkout with further options\n            handler.open({\n                name: 'Payment Information',\n                amount: amount,\n            });\n        });\n    });\n};\n\nfunction applyCoupon() {\n    $('.coupon-apply-button').on('click', function (e) {\n        e.preventDefault();\n\n        var coupon_code = $('input.coupon-code').val();\n        var job_id = $('input.job').val();\n        var token = $('.coupon-input-group input').first().val();\n\n        $.ajax({\n            url: '/jobs-ajax/' + job_id + '/apply-coupon?ajax=true',\n            method: 'POST',\n            data: {\n                code: coupon_code,\n                _token: token\n            },\n            success: function (data) {\n                if (data.message !== 'Coupon Applied') {\n                    $('#coupon_message').addClass('text-danger');\n                    $('#coupon_message').removeClass('text-success');\n                } else {\n                    $('#coupon_message').removeClass('text-danger');\n                    $('#coupon_message').addClass('text-success');\n\n                    if (data.job.is_paid) {\n                        window.location.href = '/thank-you';\n                    }\n\n                    var discount = (data.job.discount / 100).toFixed(2);\n                    var price = (data.job.price / 100).toFixed(2);\n                    var total = (price - discount).toFixed(2);\n                    var html = '<td class=\"borderless\">Discount</td><td class=\"borderless\">- $' + discount +'</td>'\n                    $('#discount_row').empty().append(html);\n                    $('#total').text(total);\n                }\n\n                $('#coupon_message').text(data.message);\n            }\n        })\n    });\n}\n\n// Close Checkout on page navigation\n$(window).on('popstate', function() {\n    handler.close();\n});\n\n$(function() {\n    createCheckoutListener();\n    applyCoupon();\n});","var renderFileUploaded = function () {\n    $('#logo').on('change', function (e) {\n        var logo = this;\n        var data = $(logo).val().split('\\\\');\n        var name = data[data.length - 1];\n        $('.uploadedFile').text(name);\n    });\n};\n\n$(function() {\n    renderFileUploaded();\n});"],"sourceRoot":"/source/"}