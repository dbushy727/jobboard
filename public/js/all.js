function setupCheckout(){var e=window.location.pathname.split("/")[2],o=function(e){return"error"==e.status?($("#errorMessage").text(e.message),!1):void 0};return getJob(e,o)}function getJob(e,o){return $.ajax({url:"/jobs-ajax/"+e,method:"get",success:function(e){return o(e)}})}function createCheckoutListener(){$("#paymentButton").on("click",function(e){e.preventDefault(),$("#checkoutModal").hide(),setupCheckout().then(function(e){var o=e.message.price-e.message.discount;handler.open({name:"Payment Information",amount:o})})})}function applyCoupon(){$(".coupon-apply-button").on("click",function(e){e.preventDefault();var o=$("input.coupon-code").val(),t=$("input.job").val(),n=$(".coupon-input-group input").first().val();$.ajax({url:"/jobs-ajax/"+t+"/apply-coupon?ajax=true",method:"POST",data:{code:o,_token:n},success:function(e){if("Coupon Applied"!==e.message)$("#coupon_message").addClass("text-danger"),$("#coupon_message").removeClass("text-success");else{$("#coupon_message").removeClass("text-danger"),$("#coupon_message").addClass("text-success"),e.job.is_paid&&(window.location.href="/thank-you");var o=(e.job.discount/100).toFixed(2),t=(e.job.price/100).toFixed(2),n=(t-o).toFixed(2),a='<td class="borderless">Discount</td><td class="borderless">- $'+o+"</td>";$("#discount_row").empty().append(a),$("#total").text(n)}$("#coupon_message").text(e.message)}})})}var key=$("#key").val(),handler=StripeCheckout.configure({key:key,image:"https://cdn2.iconfinder.com/data/icons/hicons/600/relatorio.png",locale:"auto",token:function(e){$("#token").val(e.id),$("#email").val(e.email),$("#payment").submit()}});$(window).on("popstate",function(){handler.close()}),$(function(){createCheckoutListener(),applyCoupon()});var renderFileUploaded=function(){$("#logo").on("change",function(e){var o=this,t=$(o).val().split("\\"),n=t[t.length-1];$(".uploadedFile").text(n)})};$(function(){renderFileUploaded()});